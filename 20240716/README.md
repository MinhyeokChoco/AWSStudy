# AWS
> 웹 서비스를 개발하고 배포를 할 때 사용
> 배포를 하기 위해 필요한 제 3자(사용자) 접속할 수 있는 서버 컴퓨터가 필요함.
> 1년 365일 24시간 내내 서버가 켜져 있어야 함

> 서버 컴퓨터를 대여해주는 호스팅 업체를 통해 배포를 진행

## 호스팅
1. 웹 호스팅
2. 서버 호스팅

- 웹 호스팅 : 서버의 일부 공간을 임대하는 개념 (컴퓨터를 잘게 쪼개서 제공해줌)
- 서버 호스팅 : 물리 서버를 단독으로 임대 혹은 구매

### 웹 호스팅
- 장점 : 서버의 인프라 구축이 필요가 없다. 비용이 서버 호스팅 보다 저렴하다.
- 단점 : 자원 제공이 한정적이고 단독 서버에 비해 사용량이 적다.

> laaS : 컴퓨터 자원만 제공하는 형태(AWS) infrastructure as a service
> PaaS : 헤로쿠 등 넷플리파이 등등 기존 환경에서 서비스를 올려주는 형태

## 리전
> AWS의 서버 컴퓨터의 지사, 지점
> 서울이 만약 안되면 오사카가 그나마 빠름
> 인스턴스 만들어버리면 그 리전에 맞는 인스턴스가 생성이 되어 버려서
> 스냅샷 찍어서 인스턴스를 새로 만들고 스냅샷을 인스턴스에 적용을 시켜주면 된다.
> 사전에 리전을 잘 확인 해야 함.

## EC2
> Elastic Compute Cloud의 약자
> 가상 서버를 제공해준다.
> 원하는 컴퓨터 자원을 빠르게 확장 또는 축소 해서 원하는 사이즈의 가상 서버를 설정해서 제공 받을 수 있다.
> 원하는 운영체제를 선택해서 제공 받을 수 있다.
> 비용도 저렴하고 안정성도 높다.

## 우분투 (인스턴스 사용 운영체제)
> LTS 버전의 무료 버전, 프리티어 사용 가능으로 해야 비용 발생 X, 적게 나옴

## Key
> Usb나 외장하드에 보관 해야 함, 전달 해야 할 일이 있어도 Usb나 외장 하드 이용해야 함
> 클라우드 저장소에 올리면 절대 안됨 (구글 드라이브, 깃허브 등) (지갑이 털릴 수도 있음)

### 보안 그룹 설정
> 인바운드가 요청이 들어 왔을 때, 어떤 포트를 요청 보냈을 때 허용 할건지
> ssh 하나 되어 있는데, (secure shell)
> 네트워크의 다른 컴퓨터가 원격 접속을 할 수 있게 해주는 프로토콜
> 보안이 중요한 환경에서 사용자가 암호화된 커넥션을 통해서 데이터를 전송할 수 있게 해주는 프로토콜
> ssh의 암호화는 세션의 모든 데이터를 암호화 해서 안전하게 통신을 지향
> ssh에 접속을 할 때는 인증을 거쳐서 한다. 비밀번호 키 파일

> 내가 서버 대기 상태를 포트를 3000번으로 했으면 3000번 포트도 보안그룹에 추가를 해줘야 한다.
> http://domain.com:3000
> 443 포트로 보냈는데 3000 포트로 요청한것과 같은 로직을 작성할 수 있다.


### http
> 프로토콜의 포트 번호는 80번 포트를 가지고 있던 것
> http://naver.com 포트 포워딩 혹은 프록시
> 네이버의 서버는 대기상태 포트가 다른 포트로 지정되어 있겠지만
> 80번 포트로 요청을 보냈을 때 다른 포트에서 받아서 응답을 해준 것.

### https
> 프로토콜의 포트 번호가 443번 포트
> 인증서 신뢰할 수 있는 사이트임을 증명하는 SSL/TLS 인증서가 필요하다.
> http는 보안이 필요 없는 일반적인 데이터 전송이라고 본다면
> https는 보안이 필요한 민감한 데이터를 전송할 때 사용한다. 데이터 암호화의 신뢰성을 보장해준다.
> http로 되어 있는 서버와 https로 되어 있는 서버는 서로 통신을 할 수 없다.

<!-- pem Key 있는 폴더 경로까지 터미널 열기 -->
<!-- sudo chmod 400 [pem Key 이름] (읽기 권한 부여)-->
<!-- EC2 -> 인스턴스 -> 오른쪽 위에 연결 -> SSH 클라이언트 -> (예:) ssh로 시작된 명령 복사 -->

## 데이터 베이스 설치
> 우리가 지금까지 사용한 mysql 로컬에 설치가 되어 있는 것
> 서버 컴퓨터에 mysql을 설치해서 커넥션을 맺어서 사용을 하는 것
> RDS AWS에서 제공하는 서비스가 있는데 비용이 비쌈


```sh
# 리눅스 배포판 업데이트 최신화
sudo apt-get update

# Mysql 설치
sudo apt-get install mysql-server

# Mysql 접속
sudo mysql -u root -p
## 비밀번호 공백(스페이스바 한번)으로 입력 후 접속

# Mysql 루트 비밀번호 설정
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '새로운 비밀번호';

## 갱신
FLUSH PRIVILEGES;

# 유저를 생성
CREATE USER '생성할 유저 이름'@'%' IDENTIFIED BY '비밀번호';
# 예) CREATE USER 'admin'@'%'IDENTIFIED BY '비밀번호';

# 데이터 베이스 생성
create database test;

# 권한 부여
# 'admin'@'%' : admin은 사용자 이름 / @ 골뱅이는 구분점으로 앞에는 유저 뒤에는 접속할 호스트, 주소 / % 기호는 접속할 수 있는 호스트 와일드 카드 문자
grant all on '데이터 베이스 이름'.* to 'admin'@'%';
# grant all on test.* to 'admin'@'%';

# 권한 확인
show grants for admin;

sudo service mysql restart;

# mysql cnf 설정파일 수정
sudo vi /etc/mysql/mysql.conf.d/mysqld.cnf
# 파일 수정 모드
esc : 모드 종료
i : insert 모드, 수정 모드
:wq! : 종료 후 강제 저장
:q! : 저장 안하고 종료
:w! : 강제 저장

bind-address = 127.0.0.1 => 0.0.0.0
:wq!

sudo mysqld.cnf
i
bind-address = 0.0.0.0
esc
:wq!
cd /
cd home/
cd ubuntu/
sudo service mysql restart;

# 다른 호스트에서 mysql에 접근 (외부에서 접근)
mysql의 포트 번호 3306
# 인바운드 보안 그룹 수정
3306포트 허용
```